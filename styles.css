/* ===== Tokens y base (mantengo tus variables y añado acentos y animaciones) ===== */
:root{
  /* Paleta base (rosa y neutros) */
  --pink-25:#fff7fb;
  --pink-50:#fdf2f6;
  --pink-100:#fae7ee;
  --pink-200:#f6d9e4;
  --pink-300:#efc6d6;
  --pink-400:#e8b3c8;
  --pink-500:#e29fba;
  --pink-600:#cc7fa0;

  --ink-900:#1f2c5b;
  --ink-700:#2f3a62;
  --ink-500:#4a577f;
  --ink-300:#8a93b5;

  --white:#ffffff;
  --surface:#fffafe;
  --border:#f0e5ec;

  --brand:#e91e63; /* acento principal */

  /* Gradientes */
  --grad-1: linear-gradient(135deg, #fce4ec 0%, #ffffff 60%, #f6d9e4 100%);
  --grad-2: linear-gradient(135deg, #fce4ec, #e91e63);

  /* Tipografía */
  --ff-sans: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  --ff-serif: "Playfair Display", Georgia, "Times New Roman", Times, serif;

  /* Dimensiones y decoración */
  --radius-xl: 1.25rem;
  --radius-lg: .9rem;
  --radius-md: .6rem;
  --shadow-xs: 0 2px 12px rgba(31,44,91,.06);
  --shadow-sm: 0 6px 20px rgba(31,44,91,.08);
  --shadow-md: 0 10px 30px rgba(31,44,91,.12);

  --container: 1120px;
  --gap: 1.25rem;

  --ring: 0 0 0 4px rgba(233,30,99,.18);
}

*{box-sizing:border-box}
html:focus-within{scroll-behavior:smooth}
body{
  margin:0;
  font-family:var(--ff-sans);
  color:var(--ink-900);
  background:var(--surface);
  line-height:1.6;
  -webkit-font-smoothing:antialiased;
  text-rendering:optimizeLegibility;
}
img{max-width:100%;display:block}
a{color:var(--ink-900);text-decoration:none}
a:hover{text-decoration:underline}
ul{padding-left:1.1rem}
h1,h2,h3{line-height:1.2;margin:0 0 .5rem 0;color:var(--ink-900)}
h1.display{font-family:var(--ff-serif);font-size:clamp(2rem,4.5vw,3.25rem)}
.lead{font-size:1.1rem;color:var(--ink-500)}
.section{padding:4.5rem 1rem; position:relative; isolation:isolate;}
.section-alt{background:var(--pink-50)}
.container{max-width:var(--container);margin-inline:auto}

/* Accesibilidad */
.skip-link{
  position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;
}
.skip-link:focus{
  left:1rem;top:1rem;width:auto;height:auto;background:var(--white);
  color:var(--ink-900);padding:.5rem .75rem;border-radius:.4rem;border:1px solid var(--border);
}

/* ===== Header vítreo con progreso de scroll ===== */
.site-header{
  position:sticky;top:0;z-index:50;background:rgba(255,255,255,.6);
  backdrop-filter:saturate(160%) blur(10px);
  border-bottom:1px solid rgba(0,0,0,.05)
}
.header-grid{display:grid;grid-template-columns:1fr auto auto;gap:var(--gap);align-items:center;padding:.75rem 1rem}
.brand{display:flex;flex-direction:column}
.brand-mark{font-weight:700;letter-spacing:.4px}
.brand-tag{font-size:.85rem;color:var(--ink-500)}

.scroll-progress{height:3px;background:transparent}
.scroll-progress span{
  display:block;height:100%;transform-origin:left center;transform:scaleX(0);
  background: linear-gradient(90deg, var(--brand), #ff7aa8);
  transition:transform .15s linear;
}

/* Navegación */
.nav-toggle{
  display:none;background:transparent;border:0;cursor:pointer;width:40px;height:40px;border-radius:.5rem
}
.nav-toggle .bar{display:block;width:24px;height:2px;background:var(--ink-900);margin:5px auto;transition:.2s}
.nav ul{display:flex;gap:1rem;align-items:center;list-style:none;margin:0;padding:0}
.nav a{padding:.5rem .75rem;border-radius:.5rem;position:relative}
.nav a:hover{background:var(--pink-100);text-decoration:none}
.nav a[data-underline]::after{
  content:"";position:absolute;left:.75rem;right:.75rem;bottom:.35rem;height:2px;border-radius:2px;
  transform:scaleX(0);transform-origin:left;background:currentColor;opacity:.25;transition:.2s;
}
.nav a[data-underline]:hover::after{transform:scaleX(1)}

/* ===== Hero con blobs y grid overlay ===== */
.hero{background:var(--grad-1); overflow:hidden;}
.hero-grid{display:grid;grid-template-columns:1.1fr .9fr;gap:2rem;align-items:center}
.hero-bg{
  position:absolute; inset:0; pointer-events:none; z-index:-1;
}
.hero-bg .blob{
  position:absolute; width:52vmax; height:52vmax; border-radius:50%;
  filter:blur(40px); opacity:.25; mix-blend-mode:multiply;
  animation:float 16s ease-in-out infinite;
}
.hero-bg .b1{ background:#ffd1e0; top:-15%; left:-10%;}
.hero-bg .b2{ background:#ff9bc4; bottom:-25%; right:-15%; animation-delay: -6s;}
.hero-bg .grid-overlay{
  position:absolute; inset:-10% -5%; background:
    radial-gradient(transparent 0 7px, rgba(233,30,99,.06) 8px) 0 0/ 32px 32px;
  mask: linear-gradient(#000, transparent 70%);
}

@keyframes float{
  0%,100%{ transform:translateY(0) translateX(0) }
  50%{ transform:translateY(-14px) translateX(8px) }
}

.gradient-text{
  background: linear-gradient(90deg, #1f2c5b, #e91e63);
  -webkit-background-clip:text; background-clip:text; color:transparent;
}

.gradient-underline{
  display:inline-block; position:relative; padding-bottom:.25rem;
}
.gradient-underline::after{
  content:""; position:absolute; left:0; right:0; bottom:0; height:4px; border-radius:4px;
  background: linear-gradient(90deg, #e91e63, #ff7aa8 60%, #f6d9e4);
}

/* Tarjeta de la hero con tilt suave */
.tilt{transform-style:preserve-3d; transform:perspective(800px) rotateX(0) rotateY(0); transition:transform .25s ease}
.tilt:hover{transform:perspective(800px) rotateX(2deg) rotateY(-2deg)}
.hero-card{
  background:var(--white);padding:.6rem;border-radius:var(--radius-xl);
  box-shadow:var(--shadow-md);border:1px solid var(--border)
}
.hero-cta{display:flex;gap:.75rem;margin-top:1rem}

/* ===== Layouts ===== */
.section-header{margin-bottom:2rem;text-align:center}
.section-subtitle{color:var(--ink-500);margin:0 auto;max-width:52ch}
.cards-grid{
  display:grid;grid-template-columns:repeat(3,1fr);gap:1.25rem;
  container-type:inline-size;
}

/* ===== Componentes ===== */
.card{
  background:var(--white);
  border:1px solid var(--border);
  border-radius:var(--radius-lg);
  box-shadow:var(--shadow-sm);
  padding:1rem;
  transition:transform .14s ease, box-shadow .14s ease, border-color .14s ease;
}
.card:hover{ transform:translateY(-2px); box-shadow:var(--shadow-md); border-color:rgba(0,0,0,.06); }
.prose p{margin:.9rem 0}

.btn{
  display:inline-block;border:1px solid transparent;border-radius:.75rem;
  padding:.7rem 1rem;font-weight:600;cursor:pointer;text-align:center;transition:filter .15s ease, transform .05s ease, box-shadow .15s ease;
}
.btn:focus{outline: none; box-shadow: var(--ring);}
.btn:active{ transform: translateY(1px); }
.btn-primary{background:var(--brand);border-color:var(--brand);color:var(--white)}
.btn-primary:hover{filter:brightness(1.06)}
.btn-secondary{background:var(--pink-100);border-color:var(--pink-300);color:var(--ink-900)}
.btn-secondary:hover{background:var(--pink-200)}
.btn-ghost{background:transparent;border-color:var(--pink-300);color:var(--ink-900)}
.btn-ghost:hover{background:var(--pink-100)}

/* Filtros y galería */
.filters{display:flex;gap:.5rem;flex-wrap:wrap;margin-bottom:1rem}
.filter-btn{
  padding:.45rem .8rem;border:1px solid var(--pink-300);
  background:var(--pink-100);border-radius:.6rem;cursor:pointer;transition:transform .12s ease, background .2s ease;
}
.filter-btn:hover{background:var(--pink-200); transform: translateY(-1px);}
.filter-btn.is-active{background:var(--pink-300);border-color:var(--pink-600)}

.gallery{display:grid;grid-template-columns:repeat(3,1fr);gap:.75rem}
.tile{
  overflow:hidden;border-radius:var(--radius-md);
  background:var(--white);border:1px solid var(--border); transition:box-shadow .2s ease, transform .2s ease;
}
.tile img{aspect-ratio:4/3;object-fit:cover;transition:transform .5s ease}
.tile:hover img{transform:scale(1.06)}
.tile:hover{ transform: translateY(-2px); box-shadow: var(--shadow-md); }
.tile figcaption{padding:.6rem .75rem;color:var(--ink-700)}

/* Tarjetas de dedicatorias + previews */
.card-dedicatoria header h3{margin:.25rem 0}
.card-dedicatoria .meta{color:var(--ink-500);font-size:.9rem;margin-bottom:.5rem}
.preview-wrap{ position: relative; border-radius: .6rem; overflow: hidden; }
.preview-iframe{
  width:100%; aspect-ratio:16/9; border:0; border-radius:.5rem; background:#fff;
  transform: translateZ(0); transition: filter .25s ease;
}
.preview-wrap.loaded .preview-iframe{ filter:none; }

/* Esqueleto de carga */
.iframe-skeleton{
  position:absolute; inset:0; border-radius:.5rem;
  background:linear-gradient(90deg, #f6d9e4 0%, #fae7ee 40%, #f6d9e4 80%);
  animation: skel 1.3s infinite linear;
}
@keyframes skel{ 0%{transform:translateX(-20%)} 100%{transform:translateX(20%)} }

/* Bloqueo con blur (compatible con tu JS) */
.preview-wrap.is-locked .preview-iframe{
  filter: blur(4px) saturate(90%); pointer-events:none;
}
.lock-overlay{
  position:absolute; inset:0; display:grid; place-items:center;
  background:rgba(255,255,255,.55); backdrop-filter:blur(2px);
  border:1px solid var(--border);
}
.lock-message{
  background:var(--white); color:var(--ink-900);
  border:1px solid var(--border); border-radius:.6rem;
  padding:.75rem 1rem; box-shadow:var(--shadow-sm); text-align:center; max-width:90%;
}

/* Línea de tiempo */
/* ===== Timeline creativa con línea central y nodos ===== */
.timeline{
  position: relative;
  margin: 0;
  padding: 2rem 0 2rem 0;
  list-style: none;
}
.timeline::before{
  content:"";
  position: absolute;
  top: 0; bottom: 0; left: 50%;
  width: 3px;
  background: linear-gradient(180deg, rgba(233,30,99,.35), rgba(233,30,99,.05));
  transform: translateX(-50%);
}

/* Ítems alternando lados */
.timeline-item{
  position: relative;
  width: 50%;
  padding: 0 1.25rem 2rem 1.25rem;
  opacity: 0;
  transform: translateY(14px);
  transition: opacity .6s ease, transform .6s ease;
}
.timeline-item.is-visible{ opacity: 1; transform: none; }

.timeline-item.left{ left: 0; }
.timeline-item.right{ left: 50%; }

/* Nodo sobre la línea */
.timeline-node{
  position: absolute;
  top: .35rem; /* alineado con el inicio de la tarjeta */
  width: 16px; height: 16px;
  background: #fff;
  border: 3px solid var(--brand);
  border-radius: 50%;
  box-shadow: 0 0 0 4px rgba(233,30,99,.12);
  z-index: 2;
}
.timeline-item.left .timeline-node{ right: -8px; transform: translateX(50%); }
.timeline-item.right .timeline-node{ left: -8px; transform: translateX(-50%); }

/* Tarjeta del evento */
.timeline-card{
  background: var(--white);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
  padding: 1rem 1.25rem;
  position: relative;
}
.timeline-card time{ font-weight: 700; color: var(--ink-700); display: inline-block; margin-bottom: .35rem; }
.timeline-card h4{ margin: .15rem 0 .35rem 0; }
.timeline-card p{ margin: 0; color: var(--ink-700); }

/* Piquito hacia la línea central */
.timeline-card::after{
  content:"";
  position: absolute; top: 10px; width: 10px; height: 10px;
  background: var(--white);
  border: 1px solid var(--border);
  transform: rotate(45deg);
}
.timeline-item.left .timeline-card{ margin-right: 2.25rem; }
.timeline-item.left .timeline-card::after{
  right: -6px; border-left: none; border-top: none;
}
.timeline-item.right .timeline-card{ margin-left: 2.25rem; }
.timeline-item.right .timeline-card::after{
  left: -6px; border-right: none; border-bottom: none;
}

/* Animaciones laterales sutiles */
@media (prefers-reduced-motion: no-preference){
  .timeline-item.left{ transform: translate(-12px, 14px); }
  .timeline-item.right{ transform: translate(12px, 14px); }
  .timeline-item.left.is-visible,
  .timeline-item.right.is-visible{ transform: none; }
}

/* Responsive: una sola columna con línea a la izquierda */
@media (max-width: 900px){
  .timeline::before{ left: 22px; transform: none; }
  .timeline-item,
  .timeline-item.left,
  .timeline-item.right{
    width: 100%;
    left: 0;
    padding-left: 3.25rem;
  }
  .timeline-item .timeline-node{ left: 22px; transform: translateX(-50%); }
  .timeline-item.left .timeline-card,
  .timeline-item.right .timeline-card{
    margin: 0 0 0 .5rem;
  }
  .timeline-item.left .timeline-card::after,
  .timeline-item.right .timeline-card::after{
    left: -6px; border-right: none; border-bottom: none;
  }
}


/* Carta */
.letter{font-size:1.05rem;line-height:1.95}

/* Modal */
.modal{ border:none;border-radius:var(--radius-lg);padding:0;background:transparent; }
.modal::backdrop{background:rgba(31,44,91,.35)}
.modal-card{
  background:var(--white);border:1px solid var(--border);box-shadow:var(--shadow-md);
  border-radius:var(--radius-lg);max-width:min(880px, 92vw);margin:auto;overflow:hidden
}
.modal-header{
  display:flex;justify-content:space-between;align-items:center;padding:.85rem 1rem;border-bottom:1px solid var(--border)
}
.modal-body{padding:1rem;max-height:70vh;overflow:auto}
.modal-footer{padding:1rem;border-top:1px solid var(--border);display:flex;justify-content:flex-end}
.modal-close{
  background:transparent;border:0;font-size:1.6rem;line-height:1;color:var(--ink-700);cursor:pointer; width:38px; height:38px; border-radius:.5rem;
}
.modal-close:hover{ background: var(--pink-100); }
.detalle-contenido iframe{width:100%;height:60vh;border:0;border-radius:.5rem}

/* Footer */
.site-footer{padding:2rem 1rem;background:var(--white);border-top:1px solid var(--border)}
.footer-grid{display:flex;justify-content:space-between;align-items:center;gap:1rem;flex-wrap:wrap}
.footer-grid a{color:var(--ink-700)}
.to-top{
  width:36px;height:36px;border-radius:.6rem;display:grid;place-items:center;border:1px solid var(--border);
  box-shadow:var(--shadow-xs); background:var(--white);
}
.to-top:hover{ background:var(--pink-100); text-decoration:none; }

/* ===== Animaciones de entrada (compatibles con tu JS .reveal/.is-visible) ===== */
.reveal{opacity:0;transform:translateY(14px);transition:opacity .6s ease, transform .6s ease}
.reveal.is-visible{opacity:1;transform:none}

/* ===== Responsive ===== */
@media (max-width: 960px){
  .hero-grid{grid-template-columns:1fr}
  .cards-grid{grid-template-columns:1fr 1fr}
  .gallery{grid-template-columns:1fr 1fr}
  .timeline li{grid-template-columns:1fr}
  .nav-toggle{display:block}

  .nav{
    position:fixed;inset:64px 0 auto 0;background:var(--white);border-bottom:1px solid var(--border);
    transform:translateY(-110%);transition:.25s;padding:.75rem 1rem
  }
  .nav.open{transform:translateY(0)}
  .nav ul{flex-direction:column;align-items:flex-start}
}

/* ===== Pequeños extras ===== */
[data-elevated]{ box-shadow: 0 1px 0 rgba(0,0,0,.02); }

/* Carta estilizada */
.letter-styled {
  font-family: var(--ff-serif);
  color: var(--ink-900);
  line-height: 1.9;
  font-size: 1.05rem;
  background: var(--white);
  border-radius: var(--radius-lg);
  padding: 2rem 2.5rem;
  box-shadow: var(--shadow-sm);
  border: 1px solid var(--border);
  position: relative;
  overflow: hidden;
}

/* Decoración sutil en la esquina */
.letter-styled::before {
  content: "";
  position: absolute;
  top: 0; right: 0;
  width: 120px; height: 120px;
  background: radial-gradient(circle at top right, rgba(233,30,99,0.15), transparent 70%);
}

/* Letra capitular */
.letter-styled .dropcap {
  float: left;
  font-size: 3.3rem;
  font-weight: 700;
  line-height: 1;
  margin-right: .4rem;
  color: var(--brand);
  font-family: var(--ff-serif);
}

/* Frase final */
.letter-styled .love-note {
  text-align: center;
  margin-top: 2rem;
  font-size: 1.3rem;
  font-weight: 700;
  color: var(--brand);
  letter-spacing: 1px;
}
